# Глава 6 — IEEE 802.11 Architecture and Services (шпаргалка)

Цель: понять архитектуру Wi-Fi (802.11), роли BSS/ESS/AP/DS и основные сервисы, обеспечивающие доставку данных и мобильность.

---

## 6.1 Архитектура IEEE 802.11

IEEE 802.11 работает в рамках модели IEEE 802 и делит канальный уровень на два подуровня:

LLC  
MAC  
PHY  

---

### PHY (Physical Layer)

Отвечает за физическую передачу сигнала.

Функции:
- передача и приём битов
- кодирование/декодирование сигналов
- частотные диапазоны (2.4 GHz / 5 GHz / 6 GHz)
- модуляция
- скорость передачи

PHY не работает с адресами и кадрами — только с радиосигналом.

---

### MAC (Media Access Control)

Отвечает за:
- формирование кадров (MPDU)
- управление доступом к среде
- добавление MAC-адресов
- обнаружение ошибок

Формат MPDU:

| MAC Header | MSDU | FCS |

MAC Header включает:
- Frame Control
- Duration/ID
- Address fields (до 4 MAC-адресов)
- Sequence Control

MSDU — данные верхнего уровня (IP, TCP и т.д.)

FCS (Frame Check Sequence) — контрольная сумма (CRC).
Если проверка не проходит, кадр отбрасывается.

MAC обнаруживает ошибки, но не всегда выполняет повторную передачу.

---

### LLC (Logical Link Control)

Работает поверх MAC.

Функции:
- интерфейс для верхних уровней (IP)
- опциональный контроль доставки
- возможная организация повторной передачи

В IEEE 802:
- MAC обнаруживает ошибки
- LLC может управлять восстановлением

---

## 6.2 Архитектурные компоненты Wi-Fi сети

### BSS (Basic Service Set)

Базовая ячейка Wi-Fi.

Состоит из:
- одной точки доступа (AP)
- набора станций (STA)
- общей радиосреды

Каждый BSS имеет уникальный BSSID (обычно MAC-адрес AP).

В инфраструктурном режиме станции не общаются напрямую — весь трафик проходит через AP.

---

### IBSS (Independent BSS)

Ad-hoc режим.

- Нет точки доступа
- Станции общаются напрямую

Используется редко.

---

### DS (Distribution System)

Система распределения, соединяющая несколько BSS.

Может быть:
- проводной сетью (Ethernet)
- коммутатором
- внутренней магистралью роутера

DS отвечает за передачу кадров между разными BSS.

---

### ESS (Extended Service Set)

Несколько BSS, объединённых через DS.

Для пользователя выглядит как одна сеть (один SSID).

Используется в:
- офисах
- университетах
- больших зданиях

---

## 6.3 Мобильность

IEEE 802.11 определяет три типа переходов:

1. No transition  
   Станция остаётся внутри одного BSS.

2. BSS transition  
   Переход между AP внутри одной ESS (роуминг).

3. ESS transition  
   Переход в другую ESS.  
   Сохранение соединения не гарантируется.

---

## 6.4 Сервисы IEEE 802.11

Стандарт определяет 9 сервисов.

Они делятся на:
- Station services
- Distribution services

---

### Distribution Service

Используется для передачи кадров между разными BSS через DS.

Пример:

STA → AP1 → DS → AP2 → STA

802.11 не описывает внутреннюю реализацию DS.

---

### Integration Service

Позволяет Wi-Fi сети взаимодействовать с проводной сетью (802.x).

Выполняет:
- преобразование среды передачи
- трансляцию адресов
- совместимость форматов

---

### Association

Первичное подключение станции к AP.

После association:
- AP регистрирует станцию
- DS знает, через какой AP доставлять кадры

Без association передача данных невозможна.

---

### Reassociation

Позволяет станции перейти к другому AP внутри ESS.

Используется при роуминге.

---

### Disassociation

Разрыв существующей ассоциации.

Может инициироваться:
- станцией
- точкой доступа

---

## 6.5 Важность для безопасности

Многие атаки связаны с управлением 802.11 сервисами:

- Deauthentication attack
- Evil Twin
- Rogue AP
- Перехват WPA/WPA2 handshake

Понимание BSS, ESS, DS и Association критично для анализа Wi-Fi атак.

